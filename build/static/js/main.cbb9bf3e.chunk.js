(this["webpackJsonpreact-typescript"]=this["webpackJsonpreact-typescript"]||[]).push([[0],{33:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},37:function(e,t,n){e.exports=n(49)},42:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(16),u=n.n(o),i=(n(42),n(8)),l=n(9),s=n(11),d=n(10),m=n(15),p=n(3),v=n(52),h=n(51),f=n(24),b=function(e){return r.createElement("div",{className:"basket-summary"},e.count)},E=n(17),g=(n(31),n(33)),k=n.n(g),y=Object(p.h)(Object(E.b)((function(e){return{basketCount:e.basket.products.length}}))((function(e){var t=r.useState(""),n=Object(f.a)(t,2),a=n[0],c=n[1];r.useEffect((function(){var t=new URLSearchParams(e.location.search);c(t.get("search")||"")}),[]);return r.createElement("header",{className:"header"},r.createElement("div",{className:"search-container"},r.createElement("input",{type:"search",placeholder:"search",value:a,onChange:function(e){c(e.currentTarget.value)},onKeyDown:function(t){"Enter"===t.key&&e.history.push("/products?search=".concat(a))}}),r.createElement(b,{count:e.basketCount})),r.createElement("img",{src:k.a,className:"header-logo",alt:"logo"}),r.createElement("h1",{className:"header-title"},"React Shop"),r.createElement("nav",null,r.createElement(m.c,{to:"/products",activeClassName:"header-link-active",className:"headerlink"},"Products"),r.createElement(m.c,{to:"/admin",activeClassName:"header-link-active",className:"header-link"},"Admin"),r.createElement(m.c,{to:"/contactus",activeClassName:"header-link-active",className:"header-link"},"Contact Us")))}))),O=n(5),w=n.n(O),j=n(12),N=function(){var e=Object(j.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(1e3);case 2:return n=A.filter((function(e){return e.id===t})),e.abrupt("return",0===n.length?null:n[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,1e3;case 2:return e.abrupt("return",A);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){return new Promise((function(t){return setTimeout(t,e)}))},A=[{description:"A collection of navigational components that compose declaratively with your app",id:1,name:"React Router",price:8,reviews:[{comment:"Excellent! This does everything I want",reviewer:"Billy"},{comment:"The best router I've ever worked with",reviewer:"Sally"}]},{description:"A library that helps manage state across your app",id:2,name:"React Redux",price:12,reviews:[{comment:"I've found this really useful in a large app I'm working on",reviewer:"Billy"},{comment:"A bit confusing at first but simple when you get used to it",reviewer:"Sally"}]},{description:"A library that helps you interact with a GraphQL backend",id:3,name:"React Apollo",price:12,reviews:[{comment:"I'll never work with a REST API again!",reviewer:"Billy"},{comment:"It makes working with GraphQL backends a breeze",reviewer:"Sally"}]}];!function(e){e.GETALL="PRODUCTS/GETALL",e.LOADING="PRODUCTS/LOADING",e.GETSINGLE="PRODUCTS/GETSINGLE"}(a||(a={}));var L=function(){return{type:a.LOADING}},T=n(34),x=function(e){return function(t){var n=t.loading,a=Object(T.a)(t,["loading"]);return n?r.createElement("div",{className:"loader-overlay"},r.createElement("div",{className:"loader-circle-wrap"},r.createElement("div",{className:"loader-circle"}))):r.createElement(e,a)}},I=x((function(e){var t=e.search;return r.createElement("ul",{className:"product-list"},e.products.map((function(e){return!t||t&&e.name.toLowerCase().indexOf(t.toLowerCase())>-1?r.createElement("li",{key:e.id,className:"product-list-item"},r.createElement(m.b,{to:"/products/".concat(e.id)},e.name)):null})))})),D=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getProducts()}},{key:"render",value:function(){var e=new URLSearchParams(this.props.location.search).get("search")||"";return r.createElement("div",{className:"page-container"},r.createElement("p",null,"Welcome to React Shop where you can get all your tools for ReactJS!"),r.createElement(I,{products:this.props.products,loading:this.props.loading,search:e}))}}]),n}(r.Component),P=Object(E.b)((function(e){return{loading:e.products.productsLoading,products:e.products.products}}),(function(e){return{getProducts:function(){return e(function(){var e=Object(j.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(L()),e.next=3,S();case 3:return n=e.sent,e.abrupt("return",t({products:n,type:a.GETALL}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(D),R=n(6),G=r.createContext({}),B=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleTabClick=function(e,t){a.setState({activeName:e,activeContent:t})},a.state={activeName:"",activeContent:null},a}return Object(l.a)(n,[{key:"render",value:function(){return r.createElement(G.Provider,{value:{activeName:this.state?this.state.activeName:"",handleTabClick:this.handleTabClick}},r.createElement("ul",{className:"tabs"},this.props.children),r.createElement("div",null,this.state&&this.state.activeContent))}}]),n}(r.Component);B.Tab=function(e){return r.createElement(G.Consumer,null,(function(t){if(!t.activeName&&e.initialActive&&t.handleTabClick)return t.handleTabClick(e.name,e.children),null;var n=t.activeName?t.activeName:e.initialActive?e.name:"";return r.createElement("li",{className:e.name===n?"active":"",onClick:function(n){t.handleTabClick&&t.handleTabClick(e.name,e.children)}},e.heading())}))};var F,V=B,U={likes:0,lastLike:null};!function(e){e.LIKE="LIKE"}(F||(F={}));var K,M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F.LIKE:return Object(R.a)(Object(R.a)({},e),{},{likes:e.likes+1,lastLike:t.now});default:return e}},Y=x((function(e){var t=e.product,n=e.inBasket,a=r.useReducer(M,U),c=Object(f.a)(a,2),o=c[0],u=o.likes,i=o.lastLike,l=c[1];if(!t)return null;return r.createElement(r.Fragment,null,r.createElement("h1",null,t.name),r.createElement(V,null,r.createElement(V.Tab,{name:"Description",initialActive:!0,heading:function(){return r.createElement("b",null,"Description")}},r.createElement("p",null,t.description)),r.createElement(V.Tab,{name:"Review",heading:function(){return"Reviews"}},r.createElement("ul",{className:"product-reviews"},t.reviews.map((function(e){return r.createElement("li",{key:e.reviewer},r.createElement("i",null,'"',e.comment,'"')," - ",e.reviewer)}))))),r.createElement("p",{className:"product-price"},new Intl.NumberFormat("en-US",{currency:"USD",style:"currency"}).format(t.price)),!n&&r.createElement("button",{onClick:function(){e.onAddToBasket()}},"Add to basket"),r.createElement("div",{className:"like-container"},u>0&&r.createElement("div",null,"I like this product ".concat(u,", last at ").concat(i)),r.createElement("button",{onClick:function(){l({type:F.LIKE,now:new Date})}},u>0?"Like Again":"Like")))}));!function(e){e.ADD="BASKET/ADD"}(K||(K={}));var J=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleAddClick=function(){e.props.product&&e.props.addToBasket(e.props.product)},e.navAwayMessage=function(){return"Are you sure you leave without buying this product?"},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){if(this.props.match.params.id){var e=parseInt(this.props.match.params.id,10);this.props.getProduct(e)}}},{key:"render",value:function(){var e=this.props.product;return r.createElement("div",{className:"page-container"},r.createElement(p.a,{when:!this.props.added,message:this.navAwayMessage}),e||this.props.loading?r.createElement(Y,{loading:this.props.loading,product:e,inBasket:this.props.added,onAddToBasket:this.handleAddClick}):r.createElement("p",null,"Product Not Found!!!"))}}]),n}(r.Component),z=Object(E.b)((function(e){return{basketProducts:e.basket.products,loading:e.products.productsLoading,product:e.products.currentProduct||void 0,added:e.basket.products.some((function(t){return!!e.products.currentProduct&&t.id===e.products.currentProduct.id}))}}),(function(e){return{addToBasket:function(t){return e(function(e){return{product:e,type:K.ADD}}(t))},getProduct:function(t){return e(function(e){return function(){var t=Object(j.a)(w.a.mark((function t(n){var r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(L()),t.next=3,N(e);case 3:r=t.sent,n({product:r,type:a.GETSINGLE});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(J),Q=function(){return r.createElement("div",{className:"page-container"},r.createElement("h1",null,"Login"),r.createElement("p",null,"You need to login ..."))},W=n(21),q=function(e,t){return void 0===t[e]||null===t[e]||""===t[e]?"This must be populated":""},H=function(e,t,n){return t[e]&&t[e].length<n?"This must be at least ".concat(n," character"):""},X=r.createContext({values:{},errors:{}}),Z=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).setValue=function(e,t){var n=Object(R.a)(Object(R.a)({},a.state.values),{},Object(W.a)({},e,t));a.setState({values:n})},a.validate=function(e,t){var n=a.props.validationRules[e],r=[];if(void 0===n)return r;if(Array.isArray(n))n.map((function(t){var n=t.validator(e,a.state.values,t.args);n&&r.push(n)}));else{var c=n.validator(e,a.state.values,n.args);c&&r.push(c)}var o=Object(R.a)(Object(R.a)({},a.state.errors),{},Object(W.a)({},e,r));return a.setState({errors:o}),r},a.handleSubmit=function(){var e=Object(j.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.isValidForSubmit()){e.next=9;break}return a.setState({submitting:!0}),e.next=5,a.props.onSubmit(a.state.values);case 5:n=e.sent,a.setState({errors:n.errors||{},submitted:n.success,submitting:!1},(function(){if(a.state.submitted){var e=Object.keys(a.state.values).reduce((function(e,t){return e[t]="",Object(R.a)({},e)}),{});a.setState({values:e})}})),e.next=10;break;case 9:alert("Please Clear All Errors");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r={};return Object.keys(e.defaultValue).forEach((function(e){r[e]=[]})),a.state={values:e.defaultValue,errors:r,submitted:!1,submitting:!1},a}return Object(l.a)(n,[{key:"isValidForSubmit",value:function(){var e=this,t={},n=!0;return Object.keys(this.props.defaultValue).map((function(a){t[a]=e.validate(a,e.state.values[a]),t[a].length>0&&(n=!1,e.setState({errors:t}))})),n}},{key:"render",value:function(){var e={values:this.state.values,setValue:this.setValue,errors:this.state.errors,validate:this.validate};return r.createElement(X.Provider,{value:e},r.createElement("form",{onSubmit:this.handleSubmit,className:"form",noValidate:!0},this.props.children,r.createElement("div",{className:"form-group"},r.createElement("button",{disabled:this.state.submitting||this.state.submitted,type:"submit"},"Submit"))))}}]),n}(r.Component);Z.Field=function(e){var t=e.name,n=e.label,a=e.type,c=e.options,o=function(t,n){n.setValue&&n.setValue(e.name,t.currentTarget.value)},u=function(t,n){n.validate&&n.validate(e.name,t.currentTarget.value)};return r.createElement(X.Consumer,null,(function(e){return r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:t},n),("Text"===a||"Email"===a)&&r.createElement("input",{id:t,type:null===a||void 0===a?void 0:a.toLowerCase(),onBlur:function(t){return u(t,e)},value:e.values[t],onChange:function(t){return o(t,e)}}),"TextArea"===a&&r.createElement("textarea",{id:t,onChange:function(t){return o(t,e)},onBlur:function(t){return u(t,e)},value:e.values[t]}),"Select"===a&&r.createElement("select",{value:e.values[t],onBlur:function(t){return u(t,e)},onChange:function(t){return o(t,e)}},c&&c.map((function(e){return r.createElement("option",{key:e,value:e},e)}))),e.errors[t]&&e.errors[t].length>0&&e.errors[t].map((function(e){return r.createElement("span",{key:e,className:"form-error"},e)})))}))},Z.Field.defaultProps={type:"Text"};var $=Z,_=function(e){var t=function(){var t=Object(j.a)(w.a.mark((function t(n){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmit(n);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.createElement($,{defaultValue:{name:"",email:"",reason:"Support",notes:""},onSubmit:t,validationRules:{email:{validator:q},name:[{validator:q},{validator:H,args:2}]}},r.createElement($.Field,{name:"name",label:"Your name"}),r.createElement($.Field,{name:"email",label:"Your Email Address",type:"Email"}),r.createElement($.Field,{name:"reason",label:"Reason You Need To Contact Us",type:"Select",options:["Marketing","Support","Feedback","Jobs","Other"]}),r.createElement($.Field,{name:"notes",label:"Additional Notes",type:"TextArea"}))},ee=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(){var e=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(1e3);case 2:return e.abrupt("return",{errors:{email:["something went wrong"]},success:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){return r.createElement("div",{className:"page-container"},r.createElement("h1",null,"Contact Us"),r.createElement("p",null,"If You Enter your details we'll get right back to you as soon as possible"),r.createElement(_,{onSubmit:this.handleSubmit}))}}]),n}(r.Component),te=c.a.lazy((function(){return n.e(3).then(n.bind(null,53))})),ne=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={loggedIn:!0},a}return Object(l.a)(n,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(y,null),c.a.createElement(v.a,null,c.a.createElement(h.a,{timeout:500,classNames:"animate",key:this.props.location.key},c.a.createElement(p.e,null,c.a.createElement(p.c,{exact:!0,path:"/products",component:P}),c.a.createElement(p.c,{path:"/contactus",component:ee}),c.a.createElement(p.c,{path:"/admin",component:te},this.state.loggedIn?c.a.createElement(r.Suspense,{fallback:c.a.createElement("div",{className:"page-loading"},"Loading...")},c.a.createElement(te,null)):c.a.createElement(p.b,{to:"/login"})),c.a.createElement(p.c,{path:"/login",component:Q}),c.a.createElement(p.c,{path:"/products/:id",component:z}),c.a.createElement(p.c,{render:function(){return c.a.createElement(p.b,{to:"/products"})}})))))}}]),n}(c.a.Component),ae=function(){return c.a.createElement(m.a,null,c.a.createElement(p.c,{component:ne}))},re=n(18),ce=n(35),oe={products:[],productsLoading:!1,currentProduct:null},ue={products:[]},ie=Object(re.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOADING:return Object(R.a)(Object(R.a)({},e),{},{productsLoading:!0});case a.GETALL:return Object(R.a)(Object(R.a)({},e),{},{products:t.products,productsLoading:!1});case a.GETSINGLE:return Object(R.a)(Object(R.a)({},e),{},{currentProduct:t.product,productsLoading:!1});default:return e}},basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K.ADD:return Object(R.a)(Object(R.a)({},e),{},{products:e.products.concat(t.product)});default:return e||ue}}});var le=function(e){return c.a.createElement(E.a,{store:e.store},c.a.createElement(ae,null))},se=Object(re.d)(ie,void 0,Object(re.a)(ce.a));u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(le,{store:se})),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.cbb9bf3e.chunk.js.map